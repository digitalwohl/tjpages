(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

var _tj_comm = require("tj_comm");

async function getAllWindows() {
  const data = await _tj_comm.TJ.chrome.windows.getAll();
  console.log(data);
}

window.getAllWindows = getAllWindows;

async function ready() {
  const loaded = await _tj_comm.TJ.sandbox.page.ready();
  console.log(loaded);
}

_tj_comm.TJ.chrome.windows.onFocusChanged(data => {
  console.log(data);
}); // window.addEventListener('load', ready);


window.ready = ready;

},{"tj_comm":2}],2:[function(require,module,exports){
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((t||self).tjComm={})}(this,function(t){function i(t,i){t.prototype=Object.create(i.prototype),t.prototype.constructor=t,n(t,i)}function n(t,i){return n=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t},n(t,i)}let h=t=>crypto.getRandomValues(new Uint8Array(t));var s=/*#__PURE__*/function(){function t(t,i,n,h){this.id=void 0,this.domain=void 0,this.api=void 0,this.method=void 0,this.data=void 0,this.domain=t,this.api=i,this.method=n,this.data=h,this.id=this.generateId()}return t.prototype.generateId=function(){return((t,i,n)=>{let h=(2<<Math.log(t.length-1)/Math.LN2)-1,s=-~(1.6*h*16/t.length);return()=>{let i="";for(;;){let e=n(s),o=s;for(;o--;)if(i+=t[e[o]&h]||"",16===i.length)return i}}})("1234567890",0,h)()},t}(),e=/*#__PURE__*/function(){function t(){this.PARENT_TARGET_ORIGIN="https://localhost/tabjail/sandbox",this.REGISTER_SUBSCRIPTION_DOMAIN="sandbox",this.REGISTER_SUBSCRIPTION_API="page",this.REGISTER_SUBSCRIPTION_METHOD="registerSubscription"}var i=t.prototype;return i.sendSandboxEvent=function(t){window.parent.postMessage(t,this.PARENT_TARGET_ORIGIN)},i.registerSubscription=function(t,i,n){var h=new s(this.REGISTER_SUBSCRIPTION_DOMAIN,this.REGISTER_SUBSCRIPTION_API,this.REGISTER_SUBSCRIPTION_METHOD,{domain:t,api:i,method:n});this.sendSandboxEvent(h)},t}(),o=/*#__PURE__*/function(){function t(t){this.resolve=void 0,this.reject=void 0,this.sandboxEvent=void 0,this.sandboxEvent=t}var i=t.prototype;return i.createPromise=function(){var t=this;return new Promise(function(i,n){t.resolve=i,t.reject=n})},i.resolvePromise=function(t){this.resolve(t)},i.rejectPromise=function(t){this.reject(t)},t}(),r=/*#__PURE__*/function(t){function n(){var i;return(i=t.call(this)||this).CHROME={domainName:"chrome",TABS:{apiName:"tabs",QUERY:{methodName:"query"},ON_ACTIVATED:{methodName:"onActivated"},ON_ATTACHED:{methodName:"onAttached"},ON_CREATED:{methodName:"onCreated"},ON_DETACHED:{methodName:"onDetached"},ON_HIGHLIGHT_CHANGED:{methodName:"onHighlightChanged"},ON_HIGHLIGHTED:{methodName:"onHighlighted"},ON_MOVED:{methodName:"onMoved"},ON_REMOVED:{methodName:"onRemoved"},ON_REPLACED:{methodName:"onReplaced"},ON_SELECTION_CHANGED:{methodName:"onSelectionChanged"},ON_UPDATED:{methodName:"onUpdated"},ON_ZOOM_CHANGE:{methodName:"onZoomChange"}}},i.pendingRequests=[],i.onActivatedCallbacks=[],i.onAttachedCallbacks=[],i.onCreatedCallbacks=[],i.onDetachedCallbacks=[],i.onHighlightedCallbacks=[],i.onMovedCallbacks=[],i.onRemovedCallbacks=[],i.onReplacedCallbacks=[],i.onUpdatedCallbacks=[],i.onZoomChangeCallbacks=[],i}i(n,t);var h=n.prototype;return h.query=function(){var t=new s(this.CHROME.domainName,this.CHROME.TABS.apiName,this.CHROME.TABS.QUERY.methodName),i=new o(t);return this.pendingRequests.push(i),this.sendSandboxEvent(t),i.createPromise()},h.onActivated=function(t){this.registerSubscription(this.CHROME.domainName,this.CHROME.TABS.apiName,this.CHROME.TABS.ON_ACTIVATED.methodName),this.onActivatedCallbacks.push(t)},h.onAttached=function(t){this.registerSubscription(this.CHROME.domainName,this.CHROME.TABS.apiName,this.CHROME.TABS.ON_ATTACHED.methodName),this.onAttachedCallbacks.push(t)},h.onCreated=function(t){this.registerSubscription(this.CHROME.domainName,this.CHROME.TABS.apiName,this.CHROME.TABS.ON_CREATED.methodName),this.onCreatedCallbacks.push(t)},h.onDetached=function(t){this.registerSubscription(this.CHROME.domainName,this.CHROME.TABS.apiName,this.CHROME.TABS.ON_DETACHED.methodName),this.onDetachedCallbacks.push(t)},h.onHighlighted=function(t){this.registerSubscription(this.CHROME.domainName,this.CHROME.TABS.apiName,this.CHROME.TABS.ON_HIGHLIGHTED.methodName),this.onHighlightedCallbacks.push(t)},h.onMoved=function(t){this.registerSubscription(this.CHROME.domainName,this.CHROME.TABS.apiName,this.CHROME.TABS.ON_MOVED.methodName),this.onMovedCallbacks.push(t)},h.onRemoved=function(t){this.registerSubscription(this.CHROME.domainName,this.CHROME.TABS.apiName,this.CHROME.TABS.ON_REMOVED.methodName),this.onRemovedCallbacks.push(t)},h.onReplaced=function(t){this.registerSubscription(this.CHROME.domainName,this.CHROME.TABS.apiName,this.CHROME.TABS.ON_REPLACED.methodName),this.onReplacedCallbacks.push(t)},h.onUpdated=function(t){this.registerSubscription(this.CHROME.domainName,this.CHROME.TABS.apiName,this.CHROME.TABS.ON_UPDATED.methodName),this.onUpdatedCallbacks.push(t)},h.onZoomChange=function(t){this.registerSubscription(this.CHROME.domainName,this.CHROME.TABS.apiName,this.CHROME.TABS.ON_ZOOM_CHANGE.methodName),this.onZoomChangeCallbacks.push(t)},h.onEventFromSandbox=function(t){if(t.domain===this.CHROME.domainName&&t.api===this.CHROME.TABS.apiName)switch(t.method){case this.CHROME.TABS.QUERY.methodName:var i=this.pendingRequests.find(function(i){return i.sandboxEvent.id===t.id}),n=this.pendingRequests.findIndex(function(i){return i.sandboxEvent.id===t.id});i&&(i.resolvePromise(t.data),this.pendingRequests.splice(n,1));break;case this.CHROME.TABS.ON_ACTIVATED.methodName:this.onActivatedCallbacks.forEach(function(i){return i(t.data)});break;case this.CHROME.TABS.ON_ATTACHED.methodName:this.onAttachedCallbacks.forEach(function(i){return i(t.data)});break;case this.CHROME.TABS.ON_CREATED.methodName:this.onCreatedCallbacks.forEach(function(i){return i(t.data)});break;case this.CHROME.TABS.ON_DETACHED.methodName:this.onDetachedCallbacks.forEach(function(i){return i(t.data)});break;case this.CHROME.TABS.ON_HIGHLIGHTED.methodName:this.onHighlightedCallbacks.forEach(function(i){return i(t.data)});break;case this.CHROME.TABS.ON_MOVED.methodName:this.onMovedCallbacks.forEach(function(i){return i(t.data)});break;case this.CHROME.TABS.ON_REMOVED.methodName:this.onRemovedCallbacks.forEach(function(i){return i(t.data)});break;case this.CHROME.TABS.ON_REPLACED.methodName:this.onReplacedCallbacks.forEach(function(i){return i(t.data)});break;case this.CHROME.TABS.ON_UPDATED.methodName:this.onUpdatedCallbacks.forEach(function(i){return i(t.data)});break;case this.CHROME.TABS.ON_ZOOM_CHANGE.methodName:this.onZoomChangeCallbacks.forEach(function(i){return i(t.data)})}},n}(e),u=/*#__PURE__*/function(t){function n(){var i;return(i=t.call(this)||this).CHROME={domainName:"chrome",WINDOWS:{apiName:"windows",GET_ALL:{methodName:"getAll"},ON_BOUNDS_CHANGED:{methodName:"onBoundsChanged"},ON_CREATED:{methodName:"onCreated"},ON_FOCUS_CHANGED:{methodName:"onFocusChanged"},ON_REMOVED:{methodName:"onRemoved"}}},i.pendingRequests=[],i.onBoundsChangedCallbacks=[],i.onCreatedCallbacks=[],i.onFocusChangedCallbacks=[],i.onRemovedCallbacks=[],i}i(n,t);var h=n.prototype;return h.getAll=function(){var t=new s(this.CHROME.domainName,this.CHROME.WINDOWS.apiName,this.CHROME.WINDOWS.GET_ALL.methodName),i=new o(t);return this.pendingRequests.push(i),this.sendSandboxEvent(t),i.createPromise()},h.onBoundsChanged=function(t){this.registerSubscription(this.CHROME.domainName,this.CHROME.WINDOWS.apiName,this.CHROME.WINDOWS.ON_BOUNDS_CHANGED.methodName),this.onBoundsChangedCallbacks.push(t)},h.onCreated=function(t){this.registerSubscription(this.CHROME.domainName,this.CHROME.WINDOWS.apiName,this.CHROME.WINDOWS.ON_CREATED.methodName),this.onCreatedCallbacks.push(t)},h.onFocusChanged=function(t){this.registerSubscription(this.CHROME.domainName,this.CHROME.WINDOWS.apiName,this.CHROME.WINDOWS.ON_FOCUS_CHANGED.methodName),this.onFocusChangedCallbacks.push(t)},h.onRemoved=function(t){this.registerSubscription(this.CHROME.domainName,this.CHROME.WINDOWS.apiName,this.CHROME.WINDOWS.ON_REMOVED.methodName),this.onRemovedCallbacks.push(t)},h.onEventFromSandbox=function(t){if(t.domain===this.CHROME.domainName&&t.api===this.CHROME.WINDOWS.apiName)switch(t.method){case this.CHROME.WINDOWS.GET_ALL.methodName:var i=this.pendingRequests.find(function(i){return i.sandboxEvent.id===t.id}),n=this.pendingRequests.findIndex(function(i){return i.sandboxEvent.id===t.id});i&&(i.resolvePromise(t.data),this.pendingRequests.splice(n,1));break;case this.CHROME.WINDOWS.ON_BOUNDS_CHANGED.methodName:this.onBoundsChangedCallbacks.forEach(function(i){return i(t.data)});break;case this.CHROME.WINDOWS.ON_CREATED.methodName:this.onCreatedCallbacks.forEach(function(i){return i(t.data)});break;case this.CHROME.WINDOWS.ON_FOCUS_CHANGED.methodName:this.onFocusChangedCallbacks.forEach(function(i){return i(t.data)});break;case this.CHROME.WINDOWS.ON_BOUNDS_CHANGED.methodName:this.onRemovedCallbacks.forEach(function(i){return i(t.data)})}},n}(e),a=/*#__PURE__*/function(){function t(){this.windows=new u,this.tabs=new r}return t.prototype.onEventFromSandbox=function(t){this.windows.onEventFromSandbox(t)},t}(),c=/*#__PURE__*/function(t){function n(){for(var i,n=arguments.length,h=new Array(n),s=0;s<n;s++)h[s]=arguments[s];return(i=t.call.apply(t,[this].concat(h))||this).SANDBOX={domainName:"sandbox",PAGE:{apiName:"page",JAIL:{methodName:"jail"},READY:{methodName:"ready"}}},i.pendingRequests=[],i}i(n,t);var h=n.prototype;return h.ready=function(){var t=new s(this.SANDBOX.domainName,this.SANDBOX.PAGE.apiName,this.SANDBOX.PAGE.JAIL.methodName),i=new o(t);return this.pendingRequests.push(i),this.sendSandboxEvent(t),this.registerSandboxEventsListener(),i.createPromise()},h.onEventFromSandbox=function(t){if(t.domain===this.SANDBOX.domainName&&t.api===this.SANDBOX.PAGE.apiName&&t.method===this.SANDBOX.PAGE.READY.methodName){var i=this.pendingRequests.find(function(i){return i.sandboxEvent.id===t.id}),n=this.pendingRequests.findIndex(function(i){return i.sandboxEvent.id===t.id});i&&(i.resolvePromise(!0),this.pendingRequests.splice(n,1))}},h.registerSandboxEventsListener=function(){window.addEventListener("message",function(t){d.onEventFromSandbox(t.data)},!1)},n}(e),f=/*#__PURE__*/function(){function t(){this.page=new c}return t.prototype.onEventFromSandbox=function(t){this.page.onEventFromSandbox(t)},t}(),d=/*#__PURE__*/function(){function t(){}return t.onEventFromSandbox=function(t){this.sandbox.onEventFromSandbox(t),this.chrome.onEventFromSandbox(t)},t}();d.chrome=new a,d.sandbox=new f,t.TJ=d});


},{}]},{},[1]);
